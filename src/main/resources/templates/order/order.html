
<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Order</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script type="text/javascript" src="/js/AutoFill.js"></script>
</head>

<body>
<th:block th:insert="~{tpl/navbar.html :: navbar}">
</th:block>
  <div class="container-fluid">
<h2 class=" mt-3 mb-3 text-center"> Danh sách đơn hàng</h2>
  <form id="searchForm" th:action="@{/order}" th:method="GET">
        <div class="row input-group mb-3">
            <div class="col-xl-2 col-md-2 col-sm-3 mt-1 text-right">
                <label class="">Tên đăng nhập</label>
            </div>
            <div class="col-xl-5 col-md-6 col-sm-7">
                <input class="form-control border-dark shadow-none" type="text" id="accountName" name="accountName" placeholder="Nhập tên đăng nhập">
            </div>
        </div>
        
         <div class="row input-group mb-3">
            <div class="col-xl-2 col-md-2 col-sm-3 mt-1 text-right">
                <label class="">Tên nhân viên</label>
            </div>
            <div class="col-xl-5 col-md-6 col-sm-7">
                <input class="form-control border-dark shadow-none" type="text" id="fullName" name="fullName" placeholder="Nhập tên nhân viên">
            </div>
        </div>

	 	<div class="row input-group mb-3">
            <div class="col-xl-2 col-md-2 col-sm-3 mt-1 text-right">
                <label class="">Mã sản phẩm</label>
            </div>
            <div class="col-xl-5 col-md-6 col-sm-7">
                <input class="form-control border-dark shadow-none" type="text" id="productCode" name="productCode" placeholder="Nhập mã sản phẩm">
            </div>
        </div>

        <div class="row input-group mb-3">
            <div class="col-xl-2 col-md-2 col-sm-3 mt-1 text-right">
                <label class="">Tên sản phẩm</label>
            </div>
            <div class="col-xl-5 col-md-6 col-sm-7">
                <input class="form-control border-dark shadow-none" type="text" id="productName" name="productName" placeholder="Nhập tên sản phẩm">
            </div>
        </div>

		<div class="row input-group mb-3">
            <div class="col-xl-2 col-md-2 col-sm-3 mt-1 text-right">
                <label class="">Tên khách hàng</label>
            </div>
            <div class="col-xl-5 col-md-6 col-sm-7">
                <input class="form-control border-dark shadow-none" type="text" id="customerName" name="customerName" placeholder="Nhập tên khách hàng">
            </div>
        </div>

        <div class="row input-group mb-3">
            <div class="col-xl-2 col-md-2 col-sm-3 mt-1 text-right">
                <label class="">Số điện thoại</label>
            </div>
             <div class="col-xl-5 col-md-6 col-sm-7">
                <input class="form-control border-dark shadow-none" type="text" id="phoneNumber" name="phoneNumber" placeholder="Nhập số điện thoại">
            </div>
        </div>

		<div class="row input-group mb-3">
            <div class="col-xl-2 col-md-2 col-sm-3 mt-1 text-right">
                <label class="">Ngày đặt hàng bắt đầu</label>
            </div>
            <div class="col-xl-5 col-md-6 col-sm-7">
                <input class="form-control border-dark shadow-none" type="date" id="startOrderDate" name="startOrderDate">
            </div>
        </div>

		<div class="row input-group mb-3">
            <div class="col-xl-2 col-md-2 col-sm-3 mt-1 text-right">
                <label class="">Ngày đặt hàng kết thúc</label>
            </div>
            <div class="col-xl-5 col-md-6 col-sm-7">
                <input class="form-control border-dark shadow-none" type="date" id="endOrderDate" name="endOrderDate">
            </div>
        </div>

		<div class="row input-group mb-3">
            <div class="col-xl-2 col-md-2 col-sm-3 mt-1 text-right mr-3">
                <label class="">Trạng thái</label>
            </div>
            <div class="form-check form-check-inline">
			  	<input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="orderStatus">
			  	<label class="form-check-label" for="inlineCheckbox1">Đã đặt hàng</label>
			</div>
			<div class="form-check form-check-inline">
			  	<input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="allocationStatus">
			  	<label class="form-check-label" for="inlineCheckbox2">Đã phân bổ</label>
			</div>
        </div>
		
        <div class="row mt-3 mb-3">
            <div class="col-2"></div>
            <div class="col-xl-4 col-md-6 col-sm-6 mt-1">
                <div class="row">
                    <div class="col-xl-3 col-md-5">
                        <button type="submit" class="btn btn-primary" onclick="saveSearchValues()"> Tìm kiếm</button>
                    </div>
                    <div class="col-xl-3 col-md-5">
                        <button type="reset" class="btn btn-primary" onclick="clearLocalStorage()"> Clear</button>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <form action="" method="post">
      <table width="100%">
        <thead>
          <tr class="bg-dark text-light">
            <th scope="col" class="text-center">Số thứ tự</th>
            <th scope="col">Ngày đặt hàng</th>
            <th scope="col">Mã sản phẩm</th>
            <th scope="col">Tên sản phẩm</th>
            <th scope="col">Giá bán</th>
            <th scope="col">Số lượng</th>
            <th scope="col">Tên khách hàng</th>
            <th scope="col">Số điện thoại</th>
            <th scope="col">Địa chỉ</th>
            <th scope="col">Trạng thái</th>
            <th scope="col">Ngày phân bổ</th>
            <th scope="col">Tên đăng nhập</th>
            <th scope="col">Tên nhân viên</th>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>12/04/2024</td>
            <td contenteditable="true" class="productCode1" onblur="fillData(this,document.querySelector('.productName1'),'name')">DT01</td>
            <td contenteditable="true" class="productName1" onblur="fillData(this,document.querySelector('.productCode1'),'code')">Điện thoại Iphone 8</td>
            <td>4,000,000 VND</td>
            <td contenteditable="true">2</td>
            <td contenteditable="true" class="customerName">Nguyễn Hữu Học</td>
            <td contenteditable="true" class="phoneNumber">0788640856</td>
            <td>Quảng Nam</td>
            <td>Đã phân bổ</td>
            <td>13/04/2024</td>
            <td>staff</td>
            <td>NV staff</td>
          </tr>

          <tr data-index = "2">
            <td>2</td>
            <td>20/04/2024</td>
            <td contenteditable="true" class="productCode2" onblur="fillData(this,document.querySelector('.productName2'),'name')">DT02</td>
            <td contenteditable="true" class="productName2" onblur="fillData(this,document.querySelector('.productCode2'),'code')">Điện thoại Iphone X</td>
            <td>6,000,000 VND</td>
            <td contenteditable="true">3</td>
            <td contenteditable="true" class="customerName">Võ Thị Phương Diễm</td>
            <td contenteditable="true" class="phoneNumber">0937649897</td>
            <td>Đà Nẵng</td>
            <td>Đã đặt hàng</td>
            <td>null</td>
            <td>staff</td>
            <td>NV staff</td>
          </tr>
        </tbody>
      </table>
      <nav aria-label="Page navigation example " class="d-flex justify-content-center mt-4">
        <ul class="pagination">
          <li class="page-item active">
            <a class="page-link" aria-current="page">1</a>
          </li>
          <li class="page-item">
            <a class="page-link" aria-current="page">2</a>
          </li>
          <li class="page-item">
            <a class="page-link" aria-current="page">3</a>
          </li>
        </ul>
      </nav>

      <div class="row">
        <div class="col-6 text-right">
          <button class="btn btn-primary" type="button">
             Lưu đơn hàng
          </button>
        </div>
        <div class="col-6">
          <button class="btn btn-primary" type="button">
            Reset
          </button>
        </div>
      </div>
    </form>
  </div>
  <script>
    // Lấy bảng và hàng cuối cùng
    var table = document.querySelector("table");
    createNewRow();
    // Hàm để tạo hàng mới
    function createNewRow() {
        var lastRow = table.rows[table.rows.length - 1];
        // Kiểm tra nếu người dùng đã nhập ít nhất một ô trong hàng cuối cùng
        var isRowNotEmpty = false;
        for (var i = 2; i <= 7; i++) { // Chỉ kiểm tra từ cột thứ 3 đến cột thứ 8 (index từ 2 đến 7)
            if (lastRow.cells[i].textContent.trim()) {
                isRowNotEmpty = true;
                break;
            }
        }
    
        // Nếu hàng cuối cùng không rỗng, tạo một hàng mới với số thứ tự tiếp theo
        if (isRowNotEmpty) {
            var newRow = table.insertRow(table.rows.length);
            var nextIndex = parseInt(lastRow.cells[0].textContent) + 1; // Lấy số thứ tự tiếp theo
            var cells = [];
    
            // Thêm số thứ tự vào hàng mới
            var indexCell = newRow.insertCell(0);
            indexCell.textContent = nextIndex;
    
            // Thêm các ô có thể chỉnh sửa vào hàng mới
            for (var i = 0; i < 7; i++) {
                cells[i] = newRow.insertCell(i+1);
                switch (i) {
        			case 1:
        				cells[i].setAttribute("contenteditable", "true");
        				cells[i].setAttribute("onblur", "fillData(this,document.querySelector('.productName"+(table.rows.length - 1)+"'),'name')");
        				cells[i].setAttribute("class", "productCode" + (table.rows.length - 1));
        				break;
        			case 2:
        				cells[i].setAttribute("contenteditable", "true");
        				cells[i].setAttribute("onblur", "fillData(this,document.querySelector('.productCode"+(table.rows.length - 1)+"'),'code')");
        				cells[i].setAttribute("class", "productName"+ (table.rows.length - 1));
        				break;
        			case 4:
        				cells[i].setAttribute("contenteditable", "true");
        				break;
        			case 5:
        				cells[i].setAttribute("class", "customerName");
        				cells[i].setAttribute("contenteditable", "true");
        				break;
        			case 6:
        				cells[i].setAttribute("class", "phoneNumber");
        				cells[i].setAttribute("contenteditable", "true");
        				break;
        		}
            }
        }
    }
    
    // Sự kiện khi người dùng thay đổi dữ liệu trong hàng mới
    table.addEventListener("input", function(event) {
        createNewRow();
    });
    
   
    
    </script>

    
  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
</body>

</html>